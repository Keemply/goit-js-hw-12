{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function apiRequest(searchInput, page = 1) {\n  const optionsApi = {\n    params: {\n      key: '46272240-cb3616e4f216aad50124ac1b5',\n      q: searchInput,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: 15,\n      page,\n    },\n  };\n\n  const responseApi = await axios(optionsApi);\n\n  return responseApi.data;\n}\n","export function render(arrayObjects) {\n  if (arrayObjects.length === 0) {\n    throw new Error();\n  }\n\n  const insert = arrayObjects\n    .map(\n      object => `<li class=\"gallery-object\">\n    <a href='${object.largeImageURL}' class=\"simple-gal\"><img src='${object.webformatURL}' class=\"gallery-image\" alt='${object.tags}' /></a>\n    <ul class=\"gallery-stats\">\n    <li class=\"gallery-stats-likes\">Likes <span>${object.likes}</span></li>\n    <li class=\"gallery-stats-views\">Views <span>${object.views}</span></li>\n    <li class=\"gallery-stats-comments\">Comments <span>${object.comments}</span></li>\n    <li class=\"gallery-stats-downloads\">Downloads <span>${object.downloads}</span></li>\n    </ul>\n    </li>`\n    )\n    .join('');\n  return insert;\n}\n","import simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { apiRequest } from './js/pixabay-api';\nimport { render } from './js/render-functions';\nconst form = document.querySelector('form');\nconst gallery = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\nconst showMore = document.querySelector('.show-more');\nlet pagination = {\n  searchInp: '',\n  page: 1,\n  totalPages: null,\n};\n\nconst simpleGallery = new simpleLightbox('.simple-gal', {\n  captionsData: 'alt',\n});\nfunction showLoader() {\n  loader.classList.remove('is-hidden');\n}\nfunction hideLoader() {\n  loader.classList.add('is-hidden');\n}\nasync function loadMore() {\n  try {\n    showMore.classList.add('is-hidden');\n    showLoader();\n    pagination.page++;\n    const dataApi = await apiRequest(pagination.searchInp, pagination.page);\n    console.log(dataApi);\n\n    hideLoader();\n\n    gallery.insertAdjacentHTML('beforeend', render(dataApi.hits));\n    simpleGallery.refresh();\n    const objRect = gallery.children[0].getBoundingClientRect();\n    window.scrollBy({\n      top: objRect.height * 2,\n      behavior: 'smooth',\n    });\n    if (pagination.page < pagination.totalPages) {\n      showMore.classList.remove('is-hidden');\n    } else {\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n    // Error handling\n  }\n}\n\nasync function submitHandler(event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  pagination.page = 1;\n  showLoader();\n  if (!showMore.classList.contains('is-hidden')) {\n    showMore.classList.add('is-hidden');\n  }\n  const inputVal = form[0].value.trim().split(' ');\n  pagination.searchInp = inputVal.join('+');\n  console.log(inputVal);\n  try {\n    const dataApi = await apiRequest(inputVal.join('+'));\n    pagination.totalPages = Math.ceil(dataApi.totalHits / 15);\n    console.log(pagination.totalPages);\n    hideLoader();\n\n    gallery.insertAdjacentHTML('beforeend', render(dataApi.hits));\n    simpleGallery.refresh();\n    if (dataApi.totalHits > 15) {\n      showMore.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    // Error handling\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n\n  form.reset();\n}\nform.addEventListener('submit', submitHandler);\nshowMore.addEventListener('click', loadMore);\n"],"names":["axios","apiRequest","searchInput","page","render","arrayObjects","object","form","gallery","loader","showMore","pagination","simpleGallery","simpleLightbox","showLoader","hideLoader","loadMore","dataApi","objRect","iziToast","error","submitHandler","event","inputVal"],"mappings":"owBACAA,EAAM,SAAS,QAAU,2BAElB,eAAeC,EAAWC,EAAaC,EAAO,EAAG,CAetD,OAFoB,MAAMH,EAZP,CACjB,OAAQ,CACN,IAAK,qCACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAAC,CACD,CACL,CAE4C,GAEvB,IACrB,CCnBO,SAASC,EAAOC,EAAc,CACnC,GAAIA,EAAa,SAAW,EAC1B,MAAM,IAAI,MAgBZ,OAbeA,EACZ,IACCC,GAAU;AAAA,eACDA,EAAO,aAAa,kCAAkCA,EAAO,YAAY,gCAAgCA,EAAO,IAAI;AAAA;AAAA,kDAEjFA,EAAO,KAAK;AAAA,kDACZA,EAAO,KAAK;AAAA,wDACNA,EAAO,QAAQ;AAAA,0DACbA,EAAO,SAAS;AAAA;AAAA,UAGrE,EACA,KAAK,EAAE,CAEZ,CCbA,MAAMC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAU,SAAS,cAAc,eAAe,EAChDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,SAAS,cAAc,YAAY,EACpD,IAAIC,EAAa,CACf,UAAW,GACX,KAAM,EACN,WAAY,IACd,EAEA,MAAMC,EAAgB,IAAIC,EAAe,cAAe,CACtD,aAAc,KAChB,CAAC,EACD,SAASC,GAAa,CACpBL,EAAO,UAAU,OAAO,WAAW,CACrC,CACA,SAASM,GAAa,CACpBN,EAAO,UAAU,IAAI,WAAW,CAClC,CACA,eAAeO,GAAW,CACxB,GAAI,CACFN,EAAS,UAAU,IAAI,WAAW,EAClCI,IACAH,EAAW,OACX,MAAMM,EAAU,MAAMhB,EAAWU,EAAW,UAAWA,EAAW,IAAI,EACtE,QAAQ,IAAIM,CAAO,EAEnBF,IAEAP,EAAQ,mBAAmB,YAAaJ,EAAOa,EAAQ,IAAI,CAAC,EAC5DL,EAAc,QAAO,EACrB,MAAMM,EAAUV,EAAQ,SAAS,CAAC,EAAE,sBAAqB,EACzD,OAAO,SAAS,CACd,IAAKU,EAAQ,OAAS,EACtB,SAAU,QAChB,CAAK,EACGP,EAAW,KAAOA,EAAW,WAC/BD,EAAS,UAAU,OAAO,WAAW,EAErCS,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,CAEJ,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAElB,CACH,CAEA,eAAeC,EAAcC,EAAO,CAClCA,EAAM,eAAc,EACpBd,EAAQ,UAAY,GACpBG,EAAW,KAAO,EAClBG,IACKJ,EAAS,UAAU,SAAS,WAAW,GAC1CA,EAAS,UAAU,IAAI,WAAW,EAEpC,MAAMa,EAAWhB,EAAK,CAAC,EAAE,MAAM,KAAM,EAAC,MAAM,GAAG,EAC/CI,EAAW,UAAYY,EAAS,KAAK,GAAG,EACxC,QAAQ,IAAIA,CAAQ,EACpB,GAAI,CACF,MAAMN,EAAU,MAAMhB,EAAWsB,EAAS,KAAK,GAAG,CAAC,EACnDZ,EAAW,WAAa,KAAK,KAAKM,EAAQ,UAAY,EAAE,EACxD,QAAQ,IAAIN,EAAW,UAAU,EACjCI,IAEAP,EAAQ,mBAAmB,YAAaJ,EAAOa,EAAQ,IAAI,CAAC,EAC5DL,EAAc,QAAO,EACjBK,EAAQ,UAAY,IACtBP,EAAS,UAAU,OAAO,WAAW,CAExC,MAAe,CAEdS,EAAS,MAAM,CACb,QACE,0EACR,CAAK,CACF,CAEDZ,EAAK,MAAK,CACZ,CACAA,EAAK,iBAAiB,SAAUc,CAAa,EAC7CX,EAAS,iBAAiB,QAASM,CAAQ"}